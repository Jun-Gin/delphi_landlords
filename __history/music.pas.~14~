unit music;

interface

uses FMX.Media,system.Classes,FMX.Dialogs;

type mc = class

     private
    pathName:string ;

    public

    procedure PlayMusic(filename :string);
    procedure SetMPlayerVolume(mp : TMediaPlayer;volume :single);
    function ExtractRes(ResName,ResType, ResNewName: string): boolean;
    procedure readCardNumber(cards :Tarray<string>;ty :integer);

    constructor Create();
    destructor Destory();
end;

var BC :mc;

implementation


uses game;

procedure mc.PlayMusic(fileName :string);
begin
    GameInterface.MediaPlayer1.FileName:=filename;
    GameInterface.MediaPlayer1.Play;
//       GameInterface.MediaPlayer1.
end;


constructor mc.Create();
begin

end;

destructor mc.Destory();
begin

end;



{$R myMusic.Res}

 function mc.ExtractRes(ResName,ResType, ResNewName: string): boolean;   //释放资源文件
var
    Res: TResourceStream;
begin
    try
        Res := TResourceStream.Create(Hinstance, Resname, Pchar(ResType));
        try
            Res.SavetoFile(ResNewName);
            Result := true;
            pathName:=resNewName;
        finally
            Res.Free;
        end;
    except
        Result := false;
    end;



end;


procedure mc.readCardNumber(cards : Tarray<string>;ty :integer);
//var
// str : string;
begin
 case length(cards) of
   0:
   begin

   end;
   1:
   begin
   delete(cards[0],1,1);
//   showmessage(cards[0]);
   playMusic('Woman_'+cards[0]+'.mp3');
   end;
 end;

end;



procedure mc.SetMPlayerVolume(mp :TMediaPlayer;volume : single);
begin
    mp.Volume:=volume;
end;

end.
